import{r as e,j as l,k as X,D as Re,z as me,u as Ne,l as Fe,a as Ie,m as Be,b as We,e as Ae,T as _e,F as Le,f as He,g as Ge,n as $e,h as Ve,o as ze,i as Ue,B as fe,L as qe,t as Ye}from"./index-DFmM0kmx.js";var Je=Object.defineProperty,Ke=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,he=(t,r,a)=>r in t?Je(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,Xe=(t,r)=>{for(var a in r||(r={}))ve.call(r,a)&&he(t,a,r[a]);if(Z)for(var a of Z(r))ge.call(r,a)&&he(t,a,r[a]);return t},Ze=(t,r)=>Ke(t,Qe(r)),et=(t,r)=>{var a={};for(var i in t)ve.call(t,i)&&r.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&Z)for(var i of Z(t))r.indexOf(i)<0&&ge.call(t,i)&&(a[i]=t[i]);return a},tt="^\\d+$";function nt(t){let r=setTimeout(t,0),a=setTimeout(t,10),i=setTimeout(t,50);return[r,a,i]}function rt(t){let r=e.useRef();return e.useEffect(()=>{r.current=t}),r.current}var at=18,xe=40,ot=`${xe}px`,lt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function st({containerRef:t,inputRef:r,pushPasswordManagerStrategy:a,isFocused:i}){let b=e.useRef({done:!1,refocused:!1}),[u,w]=e.useState(!1),[h,A]=e.useState(!1),[k,S]=e.useState(!1),O=e.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&u&&h,[u,h,a]),j=e.useCallback(()=>{let v=t.current,m=r.current;if(!v||!m||k||a==="none")return;let s=v,E=s.getBoundingClientRect().left+s.offsetWidth,_=s.getBoundingClientRect().top+s.offsetHeight/2,J=E-at,K=_;if(!(document.querySelectorAll(lt).length===0&&document.elementFromPoint(J,K)===v)&&(w(!0),S(!0),!b.current.refocused&&document.activeElement===m)){let $=[m.selectionStart,m.selectionEnd];m.blur(),m.focus(),m.setSelectionRange($[0],$[1]),b.current.refocused=!0}},[t,r,k,a]);return e.useEffect(()=>{let v=t.current;if(!v||a==="none")return;function m(){let E=window.innerWidth-v.getBoundingClientRect().right;A(E>=xe)}m();let s=setInterval(m,1e3);return()=>{clearInterval(s)}},[t,a]),e.useEffect(()=>{let v=i||document.activeElement===r.current;if(a==="none"||!v)return;let m=setTimeout(j,0),s=setTimeout(j,2e3),E=setTimeout(j,5e3),_=setTimeout(()=>{S(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(s),clearTimeout(E),clearTimeout(_)}},[r,i,a,j]),{hasPWMBadge:u,willPushPWMBadge:O,PWM_BADGE_SPACE_WIDTH:ot}}var be=e.createContext({}),we=e.forwardRef((t,r)=>{var a=t,{value:i,onChange:b,maxLength:u,textAlign:w="left",pattern:h=tt,inputMode:A="numeric",onComplete:k,pushPasswordManagerStrategy:S="increase-width",containerClassName:O,noScriptCSSFallback:j=it,render:v,children:m}=a,s=et(a,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]),E,_,J,K,$;let[je,Ee]=e.useState(typeof s.defaultValue=="string"?s.defaultValue:""),p=i??je,D=rt(p),V=e.useCallback(n=>{b==null||b(n),Ee(n)},[b]),y=e.useMemo(()=>h?typeof h=="string"?new RegExp(h):h:null,[h]),d=e.useRef(null),ee=e.useRef(null),te=e.useRef({value:p,onChange:V,isIOS:typeof window<"u"&&((_=(E=window==null?void 0:window.CSS)==null?void 0:E.supports)==null?void 0:_.call(E,"-webkit-touch-callout","none"))}),Q=e.useRef({prev:[(J=d.current)==null?void 0:J.selectionStart,(K=d.current)==null?void 0:K.selectionEnd,($=d.current)==null?void 0:$.selectionDirection]});e.useImperativeHandle(r,()=>d.current,[]),e.useEffect(()=>{let n=d.current,o=ee.current;if(!n||!o)return;te.current.value!==n.value&&te.current.onChange(n.value),Q.current.prev=[n.selectionStart,n.selectionEnd,n.selectionDirection];function f(){if(document.activeElement!==n){U(null),q(null);return}let c=n.selectionStart,x=n.selectionEnd,C=n.selectionDirection,N=n.maxLength,F=n.value,G=Q.current.prev,M=-1,T=-1,I;if(F.length!==0&&c!==null&&x!==null){let Te=c===x,Oe=c===F.length&&F.length<N;if(Te&&!Oe){let B=c;if(B===0)M=0,T=1,I="forward";else if(B===N)M=B-1,T=B,I="backward";else if(N>1&&F.length>1){let ae=0;if(G[0]!==null&&G[1]!==null){I=B<G[1]?"backward":"forward";let De=G[0]===G[1]&&G[0]<N;I==="backward"&&!De&&(ae=-1)}M=ae+B,T=ae+B+1}}M!==-1&&T!==-1&&M!==T&&d.current.setSelectionRange(M,T,I)}let de=M!==-1?M:c,pe=T!==-1?T:x,Me=I??C;U(de),q(pe),Q.current.prev=[de,pe,Me]}if(document.addEventListener("selectionchange",f,{capture:!0}),f(),document.activeElement===n&&ne(!0),!document.getElementById("input-otp-style")){let c=document.createElement("style");if(c.id="input-otp-style",document.head.appendChild(c),c.sheet){let x="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Y(c.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Y(c.sheet,`[data-input-otp]:autofill { ${x} }`),Y(c.sheet,`[data-input-otp]:-webkit-autofill { ${x} }`),Y(c.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Y(c.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let g=()=>{o&&o.style.setProperty("--root-height",`${n.clientHeight}px`)};g();let P=new ResizeObserver(g);return P.observe(n),()=>{document.removeEventListener("selectionchange",f,{capture:!0}),P.disconnect()}},[]);let[oe,le]=e.useState(!1),[z,ne]=e.useState(!1),[R,U]=e.useState(null),[L,q]=e.useState(null);e.useEffect(()=>{nt(()=>{var n,o,f,g;(n=d.current)==null||n.dispatchEvent(new Event("input"));let P=(o=d.current)==null?void 0:o.selectionStart,c=(f=d.current)==null?void 0:f.selectionEnd,x=(g=d.current)==null?void 0:g.selectionDirection;P!==null&&c!==null&&(U(P),q(c),Q.current.prev=[P,c,x])})},[p,z]),e.useEffect(()=>{D!==void 0&&p!==D&&D.length<u&&p.length===u&&(k==null||k(p))},[u,k,D,p]);let H=st({containerRef:ee,inputRef:d,pushPasswordManagerStrategy:S,isFocused:z}),se=e.useCallback(n=>{let o=n.currentTarget.value.slice(0,u);if(o.length>0&&y&&!y.test(o)){n.preventDefault();return}typeof D=="string"&&o.length<D.length&&document.dispatchEvent(new Event("selectionchange")),V(o)},[u,V,D,y]),ie=e.useCallback(()=>{var n;if(d.current){let o=Math.min(d.current.value.length,u-1),f=d.current.value.length;(n=d.current)==null||n.setSelectionRange(o,f),U(o),q(f)}ne(!0)},[u]),ce=e.useCallback(n=>{var o,f;let g=d.current;if(!te.current.isIOS||!n.clipboardData||!g)return;let P=n.clipboardData.getData("text/plain");n.preventDefault();let c=(o=d.current)==null?void 0:o.selectionStart,x=(f=d.current)==null?void 0:f.selectionEnd,C=(c!==x?p.slice(0,c)+P+p.slice(x):p.slice(0,c)+P+p.slice(c)).slice(0,u);if(C.length>0&&y&&!y.test(C))return;g.value=C,V(C);let N=Math.min(C.length,u-1),F=C.length;g.setSelectionRange(N,F),U(N),q(F)},[u,V,y,p]),Pe=e.useMemo(()=>({position:"relative",cursor:s.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[s.disabled]),ue=e.useMemo(()=>({position:"absolute",inset:0,width:H.willPushPWMBadge?`calc(100% + ${H.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:H.willPushPWMBadge?`inset(0 ${H.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:w,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[H.PWM_BADGE_SPACE_WIDTH,H.willPushPWMBadge,w]),ke=e.useMemo(()=>e.createElement("input",Ze(Xe({autoComplete:s.autoComplete||"one-time-code"},s),{"data-input-otp":!0,"data-input-otp-mss":R,"data-input-otp-mse":L,inputMode:A,pattern:y==null?void 0:y.source,style:ue,maxLength:u,value:p,ref:d,onPaste:n=>{var o;ce(n),(o=s.onPaste)==null||o.call(s,n)},onChange:se,onMouseOver:n=>{var o;le(!0),(o=s.onMouseOver)==null||o.call(s,n)},onMouseLeave:n=>{var o;le(!1),(o=s.onMouseLeave)==null||o.call(s,n)},onFocus:n=>{var o;ie(),(o=s.onFocus)==null||o.call(s,n)},onBlur:n=>{var o;ne(!1),(o=s.onBlur)==null||o.call(s,n)}})),[se,ie,ce,A,ue,u,L,R,s,y==null?void 0:y.source,p]),re=e.useMemo(()=>({slots:Array.from({length:u}).map((n,o)=>{let f=z&&R!==null&&L!==null&&(R===L&&o===R||o>=R&&o<L),g=p[o]!==void 0?p[o]:null;return{char:g,isActive:f,hasFakeCaret:f&&g===null}}),isFocused:z,isHovering:!s.disabled&&oe}),[z,oe,u,L,R,s.disabled,p]),Ce=e.useMemo(()=>v?v(re):e.createElement(be.Provider,{value:re},m),[m,re,v]);return e.createElement(e.Fragment,null,j!==null&&e.createElement("noscript",null,e.createElement("style",null,j)),e.createElement("div",{ref:ee,"data-input-otp-container":!0,style:Pe,className:O},Ce,e.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ke)))});we.displayName="Input";function Y(t,r){try{t.insertRule(r)}catch{console.error("input-otp could not insert CSS rule:",r)}}var it=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Se=e.forwardRef(({className:t,containerClassName:r,...a},i)=>l.jsx(we,{ref:i,containerClassName:X("flex items-center gap-2 has-[:disabled]:opacity-50",r),className:X("disabled:cursor-not-allowed",t),...a}));Se.displayName="InputOTP";const ye=e.forwardRef(({className:t,...r},a)=>l.jsx("div",{ref:a,className:X("flex items-center",t),...r}));ye.displayName="InputOTPGroup";const W=e.forwardRef(({index:t,className:r,...a},i)=>{const b=e.useContext(be),{char:u,hasFakeCaret:w,isActive:h}=b.slots[t];return l.jsxs("div",{ref:i,className:X("relative flex h-9 w-9 items-center justify-center border-y border-r border-neutral-200 text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md dark:border-neutral-800",h&&"z-10 ring-1 ring-neutral-950 dark:ring-neutral-300",r),...a,children:[u,w&&l.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"h-4 w-px animate-caret-blink bg-neutral-950 duration-1000 dark:bg-neutral-50"})})]})});W.displayName="InputOTPSlot";const ct=e.forwardRef(({...t},r)=>l.jsx("div",{ref:r,role:"separator",...t,children:l.jsx(Re,{})}));ct.displayName="InputOTPSeparator";const ut=me.object({pin:me.string().min(6,{message:"Your one-time password must be 6 characters."})}),pt=()=>{const t=Ne(),r=Fe(),a=Ie(),{email:i}=r.state||{},{toast:b}=Be(),{setUserData:u,user:w}=We(S=>S),h=Ae({resolver:Ye(ut),defaultValues:{pin:""}});async function A(S){try{await t.post("/account/verify-otp",{otp:S.pin.toString()}),b({title:"Success",description:"One-time password has been verified successfully",variant:"success"});const O=await t.get("/account/user-details").then(j=>j.data.userDetails);u(O),a("/dashboard/projects")}catch(O){console.error("Failed to verify OTP or fetch account status",O)}}function k(){t.post("/account/add-email",{name:w==null?void 0:w.GithubName,email:i})}return e.useEffect(()=>{_e()}),l.jsxs("div",{className:"h-dvh w-dvw  flex flex-col items-center justify-evenly",children:[l.jsx("div",{className:"w-[350px]",children:l.jsxs(Le,{...h,children:[l.jsxs("form",{onSubmit:h.handleSubmit(A),className:"space-y-6",children:[l.jsx(He,{control:h.control,name:"pin",render:({field:S})=>l.jsxs(Ge,{children:[l.jsx($e,{className:"text-base",children:"One-Time Password"}),l.jsx(Ve,{children:l.jsx(Se,{maxLength:6,...S,children:l.jsxs(ye,{children:[l.jsx(W,{index:0}),l.jsx(W,{index:1}),l.jsx(W,{index:2}),l.jsx(W,{index:3}),l.jsx(W,{index:4}),l.jsx(W,{index:5})]})})}),l.jsx(ze,{children:"Please enter the one-time password sent to your email."}),l.jsx(Ue,{})]})}),l.jsx(fe,{type:"submit",children:"Submit"})]}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("p",{children:["Didn't got code? ",l.jsx(fe,{variant:"link",onClick:k,children:"resend"})]}),l.jsxs("p",{children:["Not your email ",l.jsx("span",{className:"font-medium",children:i})," ? ",l.jsx(qe,{className:"underline",to:"/account/verify-email",children:"back"})]})]})]})}),l.jsx("div",{})]})};export{pt as default};
